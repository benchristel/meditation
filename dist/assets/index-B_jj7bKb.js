(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const S of o.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&r(S)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var at,x,Dt,J,bt,nt={},Rt=[],Xt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function O(t,e){for(var s in e)t[s]=e[s];return t}function Ut(t){var e=t.parentNode;e&&e.removeChild(t)}function j(t,e,s){var r,a,o,S={};for(o in e)o=="key"?r=e[o]:o=="ref"?a=e[o]:S[o]=e[o];if(arguments.length>2&&(S.children=arguments.length>3?at.call(arguments,2):s),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)S[o]===void 0&&(S[o]=t.defaultProps[o]);return Q(t,S,r,a,null)}function Q(t,e,s,r,a){var o={type:t,props:e,key:s,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++Dt};return a==null&&x.vnode!=null&&x.vnode(o),o}function X(t){return t.children}function Z(t,e){this.props=t,this.context=e}function z(t,e){if(e==null)return t.__?z(t.__,t.__.__k.indexOf(t)+1):null;for(var s;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null)return s.__e;return typeof t.type=="function"?z(t):null}function qt(t){var e,s;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null){t.__e=t.__c.base=s.__e;break}return qt(t)}}function vt(t){(!t.__d&&(t.__d=!0)&&J.push(t)&&!rt.__r++||bt!==x.debounceRendering)&&((bt=x.debounceRendering)||setTimeout)(rt)}function rt(){for(var t;rt.__r=J.length;)t=J.sort(function(e,s){return e.__v.__b-s.__v.__b}),J=[],t.some(function(e){var s,r,a,o,S,$;e.__d&&(S=(o=(s=e).__v).__e,($=s.__P)&&(r=[],(a=O({},o)).__v=o.__v+1,yt($,o,a,s.__n,$.ownerSVGElement!==void 0,o.__h!=null?[S]:null,r,S??z(o),o.__h),Wt(r,o),o.__e!=S&&qt(o)))})}function Ht(t,e,s,r,a,o,S,$,f,I){var n,p,y,l,_,N,k,L=r&&r.__k||Rt,E=L.length;for(s.__k=[],n=0;n<e.length;n++)if((l=s.__k[n]=(l=e[n])==null||typeof l=="boolean"?null:typeof l=="string"||typeof l=="number"||typeof l=="bigint"?Q(null,l,null,null,l):Array.isArray(l)?Q(X,{children:l},null,null,null):l.__b>0?Q(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l)!=null){if(l.__=s,l.__b=s.__b+1,(y=L[n])===null||y&&l.key==y.key&&l.type===y.type)L[n]=void 0;else for(p=0;p<E;p++){if((y=L[p])&&l.key==y.key&&l.type===y.type){L[p]=void 0;break}y=null}yt(t,l,y=y||nt,a,o,S,$,f,I),_=l.__e,(p=l.ref)&&y.ref!=p&&(k||(k=[]),y.ref&&k.push(y.ref,null,l),k.push(p,l.__c||_,l)),_!=null?(N==null&&(N=_),typeof l.type=="function"&&l.__k===y.__k?l.__d=f=Vt(l,f,t):f=Bt(t,l,y,L,_,f),typeof s.type=="function"&&(s.__d=f)):f&&y.__e==f&&f.parentNode!=t&&(f=z(y))}for(s.__e=N,n=E;n--;)L[n]!=null&&(typeof s.type=="function"&&L[n].__e!=null&&L[n].__e==s.__d&&(s.__d=z(r,n+1)),Ot(L[n],L[n]));if(k)for(n=0;n<k.length;n++)Gt(k[n],k[++n],k[++n])}function Vt(t,e,s){for(var r,a=t.__k,o=0;a&&o<a.length;o++)(r=a[o])&&(r.__=t,e=typeof r.type=="function"?Vt(r,e,s):Bt(s,r,r,a,r.__e,e));return e}function Bt(t,e,s,r,a,o){var S,$,f;if(e.__d!==void 0)S=e.__d,e.__d=void 0;else if(s==null||a!=o||a.parentNode==null)t:if(o==null||o.parentNode!==t)t.appendChild(a),S=null;else{for($=o,f=0;($=$.nextSibling)&&f<r.length;f+=2)if($==a)break t;t.insertBefore(a,o),S=o}return S!==void 0?S:a.nextSibling}function Yt(t,e,s,r,a){var o;for(o in s)o==="children"||o==="key"||o in e||ot(t,o,null,s[o],r);for(o in e)a&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||s[o]===e[o]||ot(t,o,e[o],s[o],r)}function St(t,e,s){e[0]==="-"?t.setProperty(e,s):t[e]=s==null?"":typeof s!="number"||Xt.test(e)?s:s+"px"}function ot(t,e,s,r,a){var o;t:if(e==="style")if(typeof s=="string")t.style.cssText=s;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)s&&e in s||St(t.style,e,"");if(s)for(e in s)r&&s[e]===r[e]||St(t.style,e,s[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=s,s?r||t.addEventListener(e,o?Pt:Tt,o):t.removeEventListener(e,o?Pt:Tt,o);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=s??"";break t}catch{}typeof s=="function"||(s!=null&&(s!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,s):t.removeAttribute(e))}}function Tt(t){this.l[t.type+!1](x.event?x.event(t):t)}function Pt(t){this.l[t.type+!0](x.event?x.event(t):t)}function yt(t,e,s,r,a,o,S,$,f){var I,n,p,y,l,_,N,k,L,E,u,h,v,m=e.type;if(e.constructor!==void 0)return null;s.__h!=null&&(f=s.__h,$=e.__e=s.__e,e.__h=null,o=[$]),(I=x.__b)&&I(e);try{t:if(typeof m=="function"){if(k=e.props,L=(I=m.contextType)&&r[I.__c],E=I?L?L.props.value:I.__:r,s.__c?N=(n=e.__c=s.__c).__=n.__E:("prototype"in m&&m.prototype.render?e.__c=n=new m(k,E):(e.__c=n=new Z(k,E),n.constructor=m,n.render=Zt),L&&L.sub(n),n.props=k,n.state||(n.state={}),n.context=E,n.__n=r,p=n.__d=!0,n.__h=[]),n.__s==null&&(n.__s=n.state),m.getDerivedStateFromProps!=null&&(n.__s==n.state&&(n.__s=O({},n.__s)),O(n.__s,m.getDerivedStateFromProps(k,n.__s))),y=n.props,l=n.state,p)m.getDerivedStateFromProps==null&&n.componentWillMount!=null&&n.componentWillMount(),n.componentDidMount!=null&&n.__h.push(n.componentDidMount);else{if(m.getDerivedStateFromProps==null&&k!==y&&n.componentWillReceiveProps!=null&&n.componentWillReceiveProps(k,E),!n.__e&&n.shouldComponentUpdate!=null&&n.shouldComponentUpdate(k,n.__s,E)===!1||e.__v===s.__v){n.props=k,n.state=n.__s,e.__v!==s.__v&&(n.__d=!1),n.__v=e,e.__e=s.__e,e.__k=s.__k,e.__k.forEach(function(T){T&&(T.__=e)}),n.__h.length&&S.push(n);break t}n.componentWillUpdate!=null&&n.componentWillUpdate(k,n.__s,E),n.componentDidUpdate!=null&&n.__h.push(function(){n.componentDidUpdate(y,l,_)})}if(n.context=E,n.props=k,n.__v=e,n.__P=t,u=x.__r,h=0,"prototype"in m&&m.prototype.render)n.state=n.__s,n.__d=!1,u&&u(e),I=n.render(n.props,n.state,n.context);else do n.__d=!1,u&&u(e),I=n.render(n.props,n.state,n.context),n.state=n.__s;while(n.__d&&++h<25);n.state=n.__s,n.getChildContext!=null&&(r=O(O({},r),n.getChildContext())),p||n.getSnapshotBeforeUpdate==null||(_=n.getSnapshotBeforeUpdate(y,l)),v=I!=null&&I.type===X&&I.key==null?I.props.children:I,Ht(t,Array.isArray(v)?v:[v],e,s,r,a,o,S,$,f),n.base=e.__e,e.__h=null,n.__h.length&&S.push(n),N&&(n.__E=n.__=null),n.__e=!1}else o==null&&e.__v===s.__v?(e.__k=s.__k,e.__e=s.__e):e.__e=Qt(s.__e,e,s,r,a,o,S,f);(I=x.diffed)&&I(e)}catch(T){e.__v=null,(f||o!=null)&&(e.__e=$,e.__h=!!f,o[o.indexOf($)]=null),x.__e(T,e,s)}}function Wt(t,e){x.__c&&x.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(r){r.call(s)})}catch(r){x.__e(r,s.__v)}})}function Qt(t,e,s,r,a,o,S,$){var f,I,n,p=s.props,y=e.props,l=e.type,_=0;if(l==="svg"&&(a=!0),o!=null){for(;_<o.length;_++)if((f=o[_])&&"setAttribute"in f==!!l&&(l?f.localName===l:f.nodeType===3)){t=f,o[_]=null;break}}if(t==null){if(l===null)return document.createTextNode(y);t=a?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l,y.is&&y),o=null,$=!1}if(l===null)p===y||$&&t.data===y||(t.data=y);else{if(o=o&&at.call(t.childNodes),I=(p=s.props||nt).dangerouslySetInnerHTML,n=y.dangerouslySetInnerHTML,!$){if(o!=null)for(p={},_=0;_<t.attributes.length;_++)p[t.attributes[_].name]=t.attributes[_].value;(n||I)&&(n&&(I&&n.__html==I.__html||n.__html===t.innerHTML)||(t.innerHTML=n&&n.__html||""))}if(Yt(t,y,p,a,$),n)e.__k=[];else if(_=e.props.children,Ht(t,Array.isArray(_)?_:[_],e,s,r,a&&l!=="foreignObject",o,S,o?o[0]:s.__k&&z(s,0),$),o!=null)for(_=o.length;_--;)o[_]!=null&&Ut(o[_]);$||("value"in y&&(_=y.value)!==void 0&&(_!==t.value||l==="progress"&&!_||l==="option"&&_!==p.value)&&ot(t,"value",_,p.value,!1),"checked"in y&&(_=y.checked)!==void 0&&_!==t.checked&&ot(t,"checked",_,p.checked,!1))}return t}function Gt(t,e,s){try{typeof t=="function"?t(e):t.current=e}catch(r){x.__e(r,s)}}function Ot(t,e,s){var r,a;if(x.unmount&&x.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Gt(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){x.__e(o,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&Ot(r[a],e,typeof t.type!="function");s||t.__e==null||Ut(t.__e),t.__=t.__e=t.__d=void 0}function Zt(t,e,s){return this.constructor(t,s)}function te(t,e,s){var r,a,o;x.__&&x.__(t,e),a=(r=typeof s=="function")?null:s&&s.__k||e.__k,o=[],yt(e,t=(!r&&s||e).__k=j(X,null,[t]),a||nt,nt,e.ownerSVGElement!==void 0,!r&&s?[s]:a?null:e.firstChild?at.call(e.childNodes):null,o,!r&&s?s:a?a.__e:e.firstChild,r),Wt(o,t)}at=Rt.slice,x={__e:function(t,e,s,r){for(var a,o,S;e=e.__;)if((a=e.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(t)),S=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,r||{}),S=a.__d),S)return a.__E=a}catch($){t=$}throw t}},Dt=0,Z.prototype.setState=function(t,e){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=O({},this.state),typeof t=="function"&&(t=t(O({},s),this.props)),t&&O(s,t),t!=null&&this.__v&&(e&&this.__h.push(e),vt(this))},Z.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),vt(this))},Z.prototype.render=X,J=[],rt.__r=0;var Kt,R,lt,xt,ct=0,jt=[],tt=[],wt=x.__b,At=x.__r,$t=x.diffed,Lt=x.__c,It=x.unmount;function ee(t,e){x.__h&&x.__h(R,t,ct||e),ct=0;var s=R.__H||(R.__H={__:[],__h:[]});return t>=s.__.length&&s.__.push({__V:tt}),s.__[t]}function se(t){return ct=1,ie(zt,t)}function ie(t,e,s){var r=ee(Kt++,2);if(r.t=t,!r.__c&&(r.__=[s?s(e):zt(void 0,e),function(o){var S=r.__N?r.__N[0]:r.__[0],$=r.t(S,o);S!==$&&(r.__N=[$,r.__[1]],r.__c.setState({}))}],r.__c=R,!R.u)){R.u=!0;var a=R.shouldComponentUpdate;R.shouldComponentUpdate=function(o,S,$){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(n){return n.__c});if(f.every(function(n){return!n.__N}))return!a||a.call(this,o,S,$);var I=!1;return f.forEach(function(n){if(n.__N){var p=n.__[0];n.__=n.__N,n.__N=void 0,p!==n.__[0]&&(I=!0)}}),!!I&&(!a||a.call(this,o,S,$))}}return r.__N||r.__}function ne(){for(var t;t=jt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(et),t.__H.__h.forEach(ht),t.__H.__h=[]}catch(e){t.__H.__h=[],x.__e(e,t.__v)}}x.__b=function(t){typeof t.type!="function"||t.o||t.type===X?t.o||(t.o=t.__&&t.__.o?t.__.o:""):t.o=(t.__&&t.__.o?t.__.o:"")+(t.__&&t.__.__k?t.__.__k.indexOf(t):0),R=null,wt&&wt(t)},x.__r=function(t){At&&At(t),Kt=0;var e=(R=t.__c).__H;e&&(lt===R?(e.__h=[],R.__h=[],e.__.forEach(function(s){s.__N&&(s.__=s.__N),s.__V=tt,s.__N=s.i=void 0})):(e.__h.forEach(et),e.__h.forEach(ht),e.__h=[])),lt=R},x.diffed=function(t){$t&&$t(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(jt.push(e)!==1&&xt===x.requestAnimationFrame||((xt=x.requestAnimationFrame)||re)(ne)),e.__H.__.forEach(function(s){s.i&&(s.__H=s.i),s.__V!==tt&&(s.__=s.__V),s.i=void 0,s.__V=tt})),lt=R=null},x.__c=function(t,e){e.some(function(s){try{s.__h.forEach(et),s.__h=s.__h.filter(function(r){return!r.__||ht(r)})}catch(r){e.some(function(a){a.__h&&(a.__h=[])}),e=[],x.__e(r,s.__v)}}),Lt&&Lt(t,e)},x.unmount=function(t){It&&It(t);var e,s=t.__c;s&&s.__H&&(s.__H.__.forEach(function(r){try{et(r)}catch(a){e=a}}),s.__H=void 0,e&&x.__e(e,s.__v))};var Mt=typeof requestAnimationFrame=="function";function re(t){var e,s=function(){clearTimeout(r),Mt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(s,100);Mt&&(e=requestAnimationFrame(s))}function et(t){var e=R,s=t.__c;typeof s=="function"&&(t.__c=void 0,s()),R=e}function ht(t){var e=R;t.__c=t.__(),R=e}function zt(t,e){return typeof e=="function"?e(t):e}var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kt={};(function(t){const e={},s={None:0,Loading:1,Starting:2,Play:3,Stop:4,Error:5},r={Debug:1,Info:2,Warning:3,Error:4,None:5},a={None:1,Linear:2,EqualPower:3};function o(f,I,n){this.audioPath=n,this.trackName=n.replace(/^.*[\\/]/,"").split(".")[0];const p=f,y=I;let l=null,_=null,N=null,k=null,L=null,E=0,u=0,h=0,v=s.None,m=s.None,T=0,C=null,M=1,U=0,H=0;this.setCrossfade=(g,A,w=!0)=>{if(U=g,H=A,h>0){const F=U+H;F>h&&(y.warn(`Crossfade total exceeds duration (${F} > ${h}), clamping for ${this.audioPath}`),U=Math.min(g,h/2),H=Math.min(A,h/2))}w&&b((h-u)/1e3)},this.calcFadeAmount=g=>{const A=Math.max(0,Math.min(1,g));return p.crossfadeShape===a.Linear?1-A:p.crossfadeShape===a.EqualPower?1-Math.sqrt(A):0},this.getVolume=()=>{M=1;const g=u*p.playbackRate,A=h*p.playbackRate;g<U&&(M=M-this.calcFadeAmount(g/U));const w=A-g;return w<H&&(M=M-this.calcFadeAmount(w/H)),Math.min(1,Math.max(0,M*p.volume))};const q=g=>{m!==g&&g===s.Play&&(E=new Date().getTime()),m=g,v=s.None,p.uiDirty=!0};this.getState=()=>m,this.unload=g=>{this.stop(),q(g?s.Error:s.None),k&&k.abort(),l=null,_=null,N=null,u=0,h=0,T=0,L&&(L.disconnect(),L=null),p.onunload(this.audioPath)};const V=()=>{m===s.Play&&p.onEndedCallback()},B=g=>g?g.message?g.message:g.target&&g.target.error&&g.target.error.message?g.target.error.message:g:"Error playing Gapless 5 audio",G=g=>{const A=B(g);y.error(A),this.unload(!0),p.onerror(this.audioPath,A)},Y=g=>g/100>=4,i=g=>{k&&(k=null,N=g,h=g.duration*1e3,L||(L=p.context.createGain(),L.connect(p.context.destination)),L.gain.value=this.getVolume(),v===s.Play&&m===s.Loading?(this.setCrossfade(U,H),D(!0)):l!==null&&v===s.None&&this.inPlayState(!0)&&(y.debug(`Switching from HTML5 to WebAudio: ${this.audioPath}`),q(s.Stop),this.play(!0)),m===s.Loading&&(m=s.Stop),p.onload(this.audioPath,!0),p.playlist.updateLoading(),p.uiDirty=!0)},c=()=>{h=l.duration*1e3},d=()=>{m===s.Loading&&(m=s.Stop,h=l.duration*1e3,v===s.Play&&(this.setCrossfade(U,H),D(!0)),p.onload(this.audioPath,!1),p.playlist.updateLoading(),p.uiDirty=!0)};this.stop=(g=!1)=>{m!==s.None&&(y.debug(`Stopping: ${this.audioPath}`),l&&l.pause(),_&&(C&&(window.clearTimeout(C),C=null),_.stop(0),_.disconnect()),q(s.Stop),g&&(this.setPosition(0),this.setCrossfade(0,0,!1)))};const b=g=>{if(C&&window.clearTimeout(C),this.inPlayState(!0)){const A=Math.max(0,g/p.playbackRate-H/1e3);y.debug(`onEnded() will be called on ${this.audioPath} in ${A.toFixed(2)} sec`),C=window.setTimeout(V,A*1e3)}},P=(g,A)=>g&&l?l.currentTime?(l.currentTime+A)*1e3+p.avgTickMS:0:u,D=g=>{if(this.inPlayState(!0))return;u=Math.max(u,0),(!Number.isFinite(u)||u>=this.getLength())&&(u=0);const A=p.isSingleLoop();if(N!==null)q(s.Starting),p.context.resume().then(()=>{if(m===s.Starting){L.gain.value=this.getVolume(),_&&(_.stop(),_.disconnect()),_=p.context.createBufferSource(),_.buffer=N,_.playbackRate.value=p.playbackRate,_.loop=A,_.connect(L);const w=P(g,p.context.baseLatency)/1e3;y.debug(`Playing WebAudio${A?" (looped)":""}: ${this.audioPath} at ${w.toFixed(2)} sec`),_.start(0,w),q(s.Play),p.onplay(this.audioPath),b(_.buffer.duration-w),l&&l.pause()}else _&&(_.stop(),_.disconnect())});else if(l!==null){const w=u/1e3;l.currentTime=w,l.volume=this.getVolume(),l.loop=A,l.playbackRate=p.playbackRate,q(s.Starting),l.play().then(()=>{m===s.Starting?(y.debug(`Playing HTML5 Audio${A?" (looped)":""}: ${this.audioPath} at ${w.toFixed(2)} sec`),q(s.Play),p.onplay(this.audioPath),b(l.duration-w)):l&&l.pause()}).catch(F=>{F.name!=="AbortError"&&y.warn(`Failed to play ${this.audioPath}: ${F.message}`)})}};this.inPlayState=g=>m===s.Play||g&&m===s.Starting,this.isPlayActive=g=>this.inPlayState(g)||v===s.Play,this.getPosition=()=>u,this.getLength=()=>h,this.play=g=>{p.onPlayAllowed(),m===s.Loading?(y.debug(`Loading ${this.audioPath}`),v=s.Play):D(g)},this.setPlaybackRate=g=>{_&&(_.playbackRate.value=g),l&&(l.playbackRate=g),b((h-u)/1e3)},this.tick=g=>{if(m===s.Play){const A=new Date().getTime(),w=A-E;if(u=u+w*p.playbackRate,E=A,g){const F=p.isSingleLoop();_&&_.loop!==F&&(_.loop=F,y.debug(`Setting WebAudio loop to ${F}`)),l&&l.loop!==F&&(l.loop=F,y.debug(`Setting HTML5 audio loop to ${F}`))}if(l!==null&&(l.volume=this.getVolume()),L!==null){const{currentTime:F}=window.gapless5AudioContext;L.gain.linearRampToValueAtTime(this.getVolume(),F+p.tickMS/1e3)}}if(T<1){const{Starting:A,Play:w,Stop:F}=s;p.useWebAudio&&[A,w,F].includes(m)?T=1:p.useHTML5Audio&&l!==null&&l.seekable.length>0?(T=l.seekable.end(l.seekable.length-1)/l.duration,Number.isFinite(T)||(T=0)):T=0}return T},this.getSeekablePercent=()=>T,this.setPosition=(g,A)=>{A&&this.inPlayState()?(this.stop(),u=g,this.play()):u=g};const W=(g,A)=>{fetch(g).then(w=>{w.ok?w.blob().then(F=>{A(F)}):G(w.statusUI)}).catch(w=>{G(w)})};this.load=()=>{if(m!==s.None)return;const{audioPath:g}=this;if(p.onloadstart(g),m=s.Loading,p.useWebAudio){const A=w=>{w&&p.context.decodeAudioData(w).then(F=>{i(F)})};g.startsWith("blob:")?W(g,w=>{k=new FileReader,k.onload=()=>{k&&A(k.result)},k.readAsArrayBuffer(w),k.error&&G(k.error)}):(k=new XMLHttpRequest,k.open("get",g,!0),k.responseType="arraybuffer",k.onload=()=>{k&&A(k.response)},k.onerror=()=>{k&&G("Failed to load audio track")},k.onloadend=()=>{k&&Y(k.status)&&G("Failed to load audio track")},k.send())}if(p.useHTML5Audio){const A=()=>{const w=new Audio;return w.controls=!1,w.preservesPitch=!1,w.mozPreservesPitch=!1,w.webkitPreservesPitch=!1,w.addEventListener("loadedmetadata",c,!1),w.addEventListener("canplaythrough",d,!1),w.addEventListener("error",G,!1),w};g.startsWith("blob:")?W(g,w=>{l=A(),l.srcObject=w,l.load()}):(l=A(),l.src=g,l.load())}}}function S(f,I,n,p=-1,y=[],l=0){const _=f,N=I;this.sources=[],this.startingTrack=0,this.trackNumber=-1,this.shuffledIndices=[],this.shuffleMode=!!n,this.shuffleRequest=null,this.preserveCurrent=!0,this.loadLimit=p,this.setStartingTrack=u=>{u==="random"?this.startingTrack=Math.floor(Math.random()*this.sources.length):this.startingTrack=u||0,N.debug(`Setting starting track to ${this.startingTrack}`),this.trackNumber=this.startingTrack},this.currentSource=()=>{if(this.numTracks()===0)return null;const{source:u}=this.getSourceIndexed(this.trackNumber);return u},this.isLastTrack=u=>u===this.sources.length-1&&!_.loop&&_.queuedTrack===null,this.setCrossfade=(u,h)=>{this.currentSource().setCrossfade(u,this.isLastTrack(this.trackNumber)?0:h)},this.gotoTrack=(u,h,v,m)=>{const{index:T,source:C}=this.getSourceIndexed(this.trackNumber),M=C.isPlayActive(!0),U=this.indexFromTrack(u);this.stopAllTracks(!0,m?[_.fadingTrack]:[]);const H=B=>this.shuffleRequest!==null?this.shuffleRequest?(this.shuffleRequest=null,k(B)):(this.shuffleRequest=null,L(B)):B;this.trackNumber=v?H(U):U,N.debug(`Setting track number to ${this.trackNumber}`),this.updateLoading(),_.scrub(0,!0);const{index:q,source:V}=this.getSourceIndexed(this.trackNumber);if(T===q)return(h||M)&&(C.stop(),C.play()),this.trackNumber;if(m||C.stop(!0),h||M){const B=m?_.crossfade:0,G=m&&!this.isLastTrack(q)?_.crossfade:0;V.setCrossfade(B,G),V.play()}return this.trackNumber};const k=u=>{const h=Array.from(Array(this.sources.length).keys());for(let v=0;v<h.length-1;v++){const m=v+Math.floor(Math.random()*(h.length-v));[h[m],h[v]]=[h[v],h[m]]}if(this.preserveCurrent&&this.trackNumber===h[u]&&([h[this.trackNumber],h[u]]=[h[u],h[this.trackNumber]]),JSON.stringify(h)===JSON.stringify(Array.from(Array(this.sources.length).keys()))){const v=h.filter(U=>U!==this.trackNumber),m=Math.floor(Math.random()*v.length),T=(m+1)%v.length,C=h[v[m]],M=h[v[T]];[h[C],h[M]]=[h[M],h[C]]}return this.shuffledIndices=h,this.shuffleMode=!0,N.debug(`Shuffled tracks: ${this.shuffledIndices}`),u},L=u=>(this.shuffleMode=!1,N.debug("Disabling shuffle"),this.preserveCurrent&&this.shuffledIndices[this.trackNumber]===u?(u+1)%this.numTracks():u);this.lastIndex=(u,h,v)=>{const m=h[u];for(let T=0;T<v.length;T++)if(v[T].index===m.index)return T;return 0},this.stopAllTracks=(u,h=[])=>{for(let v=0;v<this.sources.length;v++)h.includes(this.getPlaylistIndex(v))||this.sources[v].stop(u)},this.removeAllTracks=u=>{for(let h=0;h<this.sources.length;h++)this.sources[h].unload();u&&(this.shuffledIndices=[],this.setStartingTrack(-1)),this.sources=[]},this.setPlaybackRate=u=>{for(let h=0;h<this.sources.length;h++)this.sources[h].setPlaybackRate(u)},this.setShuffle=(u,h=!0)=>{this.shuffleRequest=u,this.preserveCurrent=h,h||k(this.trackNumber)},this.isShuffled=()=>this.shuffleRequest!==null?this.shuffleRequest:this.shuffleMode,this.numTracks=()=>this.sources.length,this.getTracks=()=>{const u=[];for(let h=0;h<this.numTracks();h++){const{source:v}=this.getSourceIndexed(h);u.push(v.audioPath)}return u},this.indexFromTrack=u=>typeof u=="string"?this.findTrack(u):u,this.findTrack=u=>this.getTracks().indexOf(u),this.getSourceIndexed=u=>{const h=this.shuffleMode?this.shuffledIndices[u]:u;return{index:h,source:this.sources[h]}},this.getPlaylistIndex=u=>this.shuffleMode?this.shuffledIndices.indexOf(u):u;const E=(u,h)=>Array.from({length:1+h-u},(v,m)=>m+u);if(this.loadableTracks=()=>{if(this.loadLimit===-1)return new Set(E(0,this.sources.length));const u=Math.round(Math.max(0,this.trackNumber-(this.loadLimit-1)/2)),h=Math.round(Math.min(this.sources.length,this.trackNumber+this.loadLimit/2)),v=new Set(E(u,h));return _.queuedTrack!==null&&v.add(this.indexFromTrack(_.queuedTrack)),_.fadingTrack!==null&&v.add(this.indexFromTrack(_.fadingTrack)),N.debug(`Loadable indices: ${JSON.stringify([...v])}`),v},this.updateLoading=()=>{const u=this.loadableTracks(),h=this.getPlaylistIndex(this.trackNumber),v=this.sources[h];if(u.has(h)&&v.getState()===s.None)N.debug(`Loading track ${h}: ${v.audioPath}`),v.load();else for(const[m,T]of this.sources.entries()){const C=this.getPlaylistIndex(m),M=u.has(C),U=T.getState()!==s.None;M!==U&&(M?(N.debug(`Loading track ${C}: ${T.audioPath}`),T.load()):(T.unload(),N.debug(`Unloaded track ${C}: ${T.audioPath}`)))}},this.add=(u,h)=>{const v=new o(_,N,h);this.sources.splice(u,0,v),this.shuffledIndices.splice(Math.floor(Math.random()*this.numTracks()),0,this.numTracks()-1),(u<=this.trackNumber||this.trackNumber===-1)&&(this.trackNumber=this.trackNumber+1,this.trackNumber>0&&N.debug(`Insertion shifted current track number to ${this.trackNumber}`)),this.updateLoading()},this.remove=u=>{this.sources.splice(u,1),this.shuffledIndices.splice(this.shuffledIndices.indexOf(u),1);for(let h=0;h<this.shuffledIndices.length;h++)this.shuffledIndices[h]>=u&&(this.shuffledIndices[h]=this.shuffledIndices[h]-1);this.trackNumber>0&&(u<this.trackNumber||u>=this.numTracks()-2)&&(this.trackNumber=this.trackNumber-1,N.debug(`Decrementing track number to ${this.trackNumber}`)),this.isShuffled&&!_.canShuffle()&&(this.setShuffle(!1),_.uiDirty=!0),this.updateLoading()},y.length>0){for(let u=0;u<y.length;u++)this.sources.push(new o(_,N,y[u])),this.shuffledIndices.splice(Math.floor(Math.random()*this.numTracks()),0,this.numTracks()-1);this.setStartingTrack(l),this.updateLoading()}}function $(f={},I={}){typeof f=="string"&&(console.warn('Using deprecated API.  Pass element id into options as "guiId"'),f={...I,guiId:f});const n=65535,p={loading:"loading…",error:"error!",percent:0};this.hasGUI=!1,this.scrubWidth=0,this.scrubPosition=0,this.isScrubbing=!1;let y=null;this.tickMS=27,this.avgTickMS=this.tickMS,this.initialized=!1,this.uiDirty=!0;const l={debug:()=>{},log:()=>{},warn:()=>{},error:()=>{}};switch(f.logLevel||r.Info){case r.Debug:l.debug=console.debug;case r.Info:l.info=console.info;case r.Warning:l.warn=console.warn;case r.Error:l.error=console.error;case r.None:}this.playlist=null,this.loop=f.loop||!1,this.singleMode=f.singleMode||!1,this.exclusive=f.exclusive||!1,this.queuedTrack=null,this.fadingTrack=null,this.volume=f.volume!==void 0?f.volume:1,this.crossfade=f.crossfade||0,this.crossfadeShape=f.crossfadeShape||a.None;const _="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";let N=!1;const k=new Audio;if(k.controls=!1,k.loop=!0,k.src=_,k.load(),this.onPlayAllowed=()=>{N||(N=!0,k.play().then(()=>{k.pause()}))},this.useWebAudio=f.useWebAudio!==!1,this.useHTML5Audio=f.useHTML5Audio!==!1,this.playbackRate=f.playbackRate||1,this.id=f.guiId||Math.floor((1+Math.random())*65536),e[this.id]=this,window.gapless5AudioContext===void 0){const i=window.AudioContext||window.webkitAudioContext;i&&(window.gapless5AudioContext=new i)}this.context=window.gapless5AudioContext,this.keyMappings={},this.onprev=(i,c)=>{},this.onplayrequest=i=>{},this.onplay=i=>{},this.onpause=i=>{},this.onstop=i=>{},this.onnext=(i,c)=>{},this.ontimeupdate=(i,c)=>{},this.onerror=(i,c)=>{},this.onloadstart=i=>{},this.onload=(i,c)=>{},this.onunload=i=>{},this.onfinishedtrack=i=>{},this.onfinishedall=()=>{};const L=()=>{if(!this.currentSource()||!this.currentLength())return 0;const{isScrubbing:i,scrubPosition:c}=this;return(i?c:this.currentPosition())/this.currentLength()*n},E=i=>i/n*this.currentLength();this.getIndex=(i=!1)=>{if(this.playlist!==null){const{trackNumber:c}=this.playlist;return i?this.playlist.getSourceIndexed(c).index:c}return-1};const u=i=>{let c=Math.floor(i/6e4);const d=(i-c*6e4)/1e3;let b=Math.floor(d),P=Math.floor((d-b)*100);return c<10&&(c=`0${c}`),b<10&&(b=`0${b}`),P<10&&(P=`0${P}`),`${c}:${b}.${P}`},h=()=>{let i=p.loading;if(this.totalTracks()===0)return i;const c=this.currentLength();return this.currentSource()&&this.currentSource().state===s.Error?i=p.error:c>0&&(i=u(c)),i},v=()=>{const i=this.currentSource();return i?i.trackName:""},m=i=>document.getElementById(`g5${i}-${this.id}`),T=(i,c)=>{const d=m(i);d&&(d.innerText=c)},C=i=>i>=0&&i<this.playlist.numTracks();this.totalTracks=()=>this.playlist!==null?this.playlist.numTracks():0,this.isSingleLoop=()=>this.loop&&(this.singleMode||this.totalTracks()===1),this.mapKeys=i=>{for(const c in i){const d=i[c].toUpperCase().charCodeAt(0),b=i[c].toLowerCase().charCodeAt(0),P=e[this.id];$.prototype.hasOwnProperty.call(P,c)?(this.keyMappings[d]=P[c],this.keyMappings[b]=P[c]):l.error(`Gapless5 mapKeys() error: no function named '${c}'`)}document.addEventListener("keydown",c=>{const d=c.key.charCodeAt(0);d in this.keyMappings&&this.keyMappings[d](c)})},this.getPosition=()=>this.currentSource()?this.currentSource().getPosition():0,this.setPosition=i=>{this.currentSource()&&this.currentSource().setPosition(i,!0)},this.setVolume=i=>{this.volume=Math.min(Math.max(i,0),1),this.hasGUI&&(m("volume").value=n*this.volume)},this.setGain=i=>{l.warn("Using deprecated API.  Use setVolume() with value between 0 and 1 instead."),this.setVolume(i/n)},this.scrub=(i,c=!1)=>{this.hasGUI&&(this.scrubPosition=E(i),T("position",u(this.scrubPosition)),M("prev",this.loop||this.getIndex()!==0||this.scrubPosition!==0),c&&(m("transportbar").value=i),!this.isScrubbing&&this.currentSource()&&this.currentSource().setPosition(this.scrubPosition))},this.setLoadedSpan=i=>{this.hasGUI&&p.percent!==i&&(p.percent=i,m("loadedspan").style.width=i*this.scrubWidth,i===1&&T("duration",h()))},this.getSeekablePercent=()=>{const i=this.currentSource();return i?i.getSeekablePercent():0},this.onEndedCallback=()=>{let i=!1;const c=this.currentSource();if(c){const{audioPath:d}=c;if(this.queuedTrack!==null)this.gotoTrack(this.queuedTrack),this.queuedTrack=null;else if(this.loop||this.getIndex()<this.totalTracks()-1)if(this.singleMode||this.totalTracks()===1)this.loop&&this.prev(null,!1);else{const b=()=>{const P=q();P&&P.stop(!0),this.fadingTrack=null};this.fadingTrack=this.getIndex(),window.setTimeout(()=>{b()},this.crossfade),this.next(null,!0,!0)}else c.stop(!0),this.scrub(0,!0),i=!0;this.onfinishedtrack(d)}i&&this.onfinishedall()},this.onStartedScrubbing=()=>{this.isScrubbing=!0},this.onFinishedScrubbing=()=>{this.isScrubbing=!1;const i=this.currentSource();i&&(i.inPlayState()&&this.scrubPosition>=this.currentLength()?this.next(null,!0):i.setPosition(this.scrubPosition,!0))},this.addTrack=i=>{const c=this.playlist.numTracks();this.playlist.add(c,i),this.uiDirty=!0},this.insertTrack=(i,c)=>{const d=this.totalTracks(),b=Math.min(Math.max(i,0),d);b===d?this.addTrack(c):this.playlist.add(b,c),this.uiDirty=!0},this.getTracks=()=>this.playlist.getTracks(),this.getTrack=()=>this.currentSource()?this.currentSource().audioPath:"",this.findTrack=i=>this.playlist.findTrack(i),this.removeTrack=i=>{const c=this.playlist.indexFromTrack(i);if(!C(c)){l.warn(`Cannot remove missing track: ${i}`);return}const d=c===this.playlist.trackNumber,{source:b}=this.playlist.getSourceIndexed(c);if(!b)return;let P=!1;b.state===s.Loading?b.unload():b.inPlayState(!0)&&(P=!0,b.stop()),this.playlist.remove(c),d&&(this.next(),P&&this.play()),this.uiDirty=!0},this.replaceTrack=(i,c)=>{this.removeTrack(i),this.insertTrack(i,c)},this.removeAllTracks=(i=!0)=>{this.playlist.removeAllTracks(i),this.uiDirty=!0},this.isShuffled=()=>this.playlist.isShuffled(),this.shuffle=(i=!0)=>{this.canShuffle()&&(this.playlist.setShuffle(!0,i),this.uiDirty=!0)},this.toggleShuffle=()=>{this.canShuffle()&&(this.playlist.setShuffle(!this.isShuffled()),this.uiDirty=!0)},this.shuffleToggle=this.toggleShuffle,this.currentSource=()=>this.playlist?this.playlist.currentSource():null,this.currentLength=()=>this.currentSource()?this.currentSource().getLength():0,this.currentPosition=()=>this.currentSource()?this.currentSource().getPosition():0,this.setPlaybackRate=i=>{B(),this.playbackRate=i,this.playlist.setPlaybackRate(i)},this.setCrossfade=i=>{if(this.crossfade=i,this.isPlaying()){const c=this.crossfade;this.playlist.setCrossfade(c,c)}},this.setCrossfadeShape=i=>{this.crossfadeShape=i},this.queueTrack=i=>{C(this.playlist.indexFromTrack(i))?(this.queuedTrack=i,this.playlist.updateLoading()):l.error(`Cannot queue missing track: ${i}`)},this.gotoTrack=(i,c,d=!1,b=!1)=>{if(!C(this.playlist.indexFromTrack(i)))l.error(`Cannot go to missing track: ${i}`);else{const P=this.playlist.gotoTrack(i,c,d,b);M("prev",this.loop||!this.singleMode&&P>0),M("next",this.loop||!this.singleMode&&P<this.totalTracks()-1),this.uiDirty=!0}},this.prevtrack=()=>{const i=this.currentSource();if(!i)return;let c=0;if(this.getIndex()>0)c=this.getIndex()-1;else if(this.loop)c=this.totalTracks()-1;else return;this.gotoTrack(c);const d=this.currentSource();this.onprev(i.audioPath,d.audioPath)},this.prev=(i,c)=>{const d=this.currentSource();if(!d)return;let b=!0,P=0,D=this.getIndex();if(d.getPosition()>0)this.scrub(0,!0),d.setPosition(0,c||!!i),this.playlist.setCrossfade(0,this.crossfade),P=D,b=!1;else if(this.singleMode&&this.loop)P=D;else if(D>0)P=D-1;else if(this.loop)P=this.totalTracks()-1;else return;if(b){this.gotoTrack(P,c,!0);const g=this.currentSource();this.onprev(d.audioPath,g.audioPath)}},this.next=(i,c,d)=>{const b=this.currentSource();if(!b)return;let P=0,D=this.getIndex();if(this.singleMode)P=D;else if(D<this.totalTracks()-1)P=D+1;else if(!this.loop)return;this.gotoTrack(P,c,!0,d);const W=this.currentSource();this.onnext(b.audioPath,W.audioPath)},this.play=()=>{const i=this.currentSource();if(i){if(this.playlist.setCrossfade(0,this.crossfade),i.play(),this.exclusive){const{id:c}=this;for(const d in e)d!==c.toString()&&e[d].stop()}this.onplayrequest(i.audioPath)}},this.playpause=()=>{const i=this.currentSource();i&&i.inPlayState(!0)?this.pause():this.play()},this.cue=()=>{this.currentPosition()>0&&this.prev(null,!0),this.play()},this.pause=()=>{const i=this.currentSource();this.playlist.stopAllTracks(),i&&this.onpause(i.audioPath)},this.stop=()=>{const i=this.currentSource(),c=i?i.getPosition():0;this.playlist.stopAllTracks(!0),i&&(c>0&&this.scrub(0,!0),this.onstop(i.audioPath))},this.isPlaying=()=>this.currentSource()&&this.currentSource().inPlayState()||!1;const M=(i,c)=>{if(this.hasGUI){const d=m(i);if(d){const{classList:b}=d;b.remove(c?"disabled":"enabled"),b.add(c?"enabled":"disabled")}}},U=(i,c)=>{const d=m("shuffle");if(d){const b=i==="shuffle";d.classList.remove(b?"g5unshuffle":"g5shuffle"),d.classList.add(b?"g5shuffle":"g5unshuffle"),M("shuffle",c)}};this.canShuffle=()=>this.totalTracks()>2;const H=()=>{if(!this.hasGUI)return;const i=this.totalTracks();if(i===0)T("index","0"),T("numtracks","0"),T("trackname",""),T("position",u(0)),T("duration",u(0)),M("prev",!1),U("shuffle",!1),M("next",!1);else{T("index",this.playlist.trackNumber+1),T("numtracks",i),T("trackname",v()),T("duration",h()),M("prev",this.loop||this.getIndex()>0||this.currentPosition()>0),M("next",this.loop||this.getIndex()<i-1);const c=this.currentSource();c&&c.inPlayState(!0)?M("play",!1):(M("play",!0),c&&c.state===s.Error&&this.onerror(c.audioPath)),U(this.isShuffled()?"unshuffle":"shuffle",this.canShuffle())}},q=()=>{if(this.fadingTrack!==null){const{source:i}=this.playlist.getSourceIndexed(this.fadingTrack);return i}return null},V={time:-1,index:-1,position:-1},B=()=>{const i=Date.now();if(V.time>=0){const D=i-V.time;this.avgTickMS=this.avgTickMS*.9+D*.1}V.time=i;const c=q();c&&c.tick(!1);const d=this.currentSource();if(d){const D=d.tick(!0);if(this.setLoadedSpan(D),this.uiDirty&&(this.uiDirty=!1,H()),d.inPlayState()){let W=d.getPosition();this.isScrubbing&&(W=this.scrubPosition),this.hasGUI&&(m("transportbar").value=L(),T("position",u(W)))}}const b=this.getIndex(),P=this.getPosition();(V.index!==b||V.position!==P)&&(V.index=b,V.position=P,this.ontimeupdate(P,b)),y&&window.clearTimeout(y),y=window.setTimeout(B,this.tickMS)},G=i=>{const{id:c}=this,d=P=>`g5${P}-${c}`,b=P=>`
    <div class="g5positionbar" id="${d("positionbar")}">
      <span id="${d("position")}">${u(0)}</span> |
      <span id="${d("duration")}">${p.loading}</span> |
      <span id="${d("index")}">1</span>/<span id="${d("numtracks")}">1</span>
    </div>
    <div class="g5inside" id="${d("inside")}">
      ${P}
    </div>
  `;return typeof Audio>"u"?(this.hasGUI=!1,b("This player is not supported by your browser.")):b(`
    <div class="g5transport">
      <div class="g5meter" id="${d("meter")}"><span id="${d("loadedspan")}" style="width: 0%"></span></div>
      <input type="range" class="transportbar" name="transportbar" id="${d("transportbar")}"
        min="0" max="${n}" value="0" oninput="${i}.scrub(this.value);"
        onmousedown="${i}.onStartedScrubbing();" ontouchstart="${i}.onStartedScrubbing();"
        onmouseup="${i}.onFinishedScrubbing();" ontouchend="${i}.onFinishedScrubbing();"
      />
    </div>
    <div class="g5buttons" id="${d("buttons")}">
      <button class="g5button g5prev" id="${d("prev")}"></button>
      <button class="g5button g5play" id="${d("play")}"></button>
      <button class="g5button g5stop" id="${d("stop")}"></button>
      <button class="g5button g5shuffle" id="${d("shuffle")}"></button>
      <button class="g5button g5next" id="${d("next")}"></button>
      <input type="range" id="${d("volume")}" class="volume" name="gain" min="0" max="${n}"
        value="${n}" oninput="${i}.setVolume(this.value / ${n});"
      />
    </div>
  `)},Y=f.guiId?document.getElementById(f.guiId):null;if(Y){this.hasGUI=!0,Y.insertAdjacentHTML("beforeend",G(`gapless5Players['${this.id}']`));const i=(c,d)=>{const b=m(c);b&&b.addEventListener("mousedown",d)};if(i("prev",this.prev),i("play",this.playpause),i("stop",this.stop),i("shuffle",this.toggleShuffle),i("next",this.next),M("play",!0),M("stop",!0),T("position",u(0)),f.shuffleButton===!1){const c=(P,D)=>{const W=m(P);W&&(W.style.width=D)},d="111px",b="115px";c("transportbar",d),c("meter",d),c("positionbar",b),c("inside",b),m("shuffle").remove()}this.scrubWidth=m("transportbar").style.width}if(typeof Audio>"u"){l.error("This player is not supported by your browser.");return}if("startingTrack"in f&&(typeof f.startingTrack=="number"?this.startingTrack=f.startingTrack:typeof f.startingTrack=="string"&&f.startingTrack==="random"&&(this.startingTrack="random")),"mapKeys"in f&&this.mapKeys(f.mapKeys),"tracks"in f){let i=[],c=0;if(Array.isArray(f.tracks)){if(typeof f.tracks[0]=="string"){i=f.tracks;for(let d=0;d<f.tracks.length;d++)i[d]=f.tracks[d];c=this.startingTrack||0}else if(typeof f.tracks[0]=="object"){for(let d=0;d<f.tracks.length;d++)i[d]=f.tracks[d].file;c=this.startingTrack||0}}else typeof f.tracks=="string"&&(i[0]=f.tracks);this.playlist=new S(this,l,f.shuffle,f.loadLimit,i,c)}else this.playlist=new S(this,l,f.shuffle,f.loadLimit);this.initialized=!0,this.uiDirty=!0,B()}(function(I,n){n(t)})(oe,f=>{f.Gapless5=$,f.LogLevel=r,f.CrossfadeShape=a})})(kt);const ae=""+new URL("fountain-DWXOWl5E.ogg",import.meta.url).href,le=""+new URL("bell-Chy8iJIY.ogg",import.meta.url).href;class Jt{constructor(e){this.backgroundVolume=e.backgroundVolume}volumeAt(e){return this.backgroundVolume(e)}}class ue{constructor(e){this.time=0,this.ringBell=e.ringBell??Nt,this.setBackgroundVolume=e.setBackgroundVolume??Nt,this.program=e.program??ce}begin(){this.ringBell(),this.setBackgroundVolume(0)}markTime(e){this.time+=e,this.setBackgroundVolume(this.program.volumeAt(this.time))}}const ce=new Jt({backgroundVolume:()=>0}),Nt=()=>{};function he(t){return t[t.length-1]}function fe(t){return t[0]}function de(t){return(e,s)=>{const r=t(e),a=t(s);return r>a?1:a>r?-1:0}}function _e(t){const e=new pe(t);return s=>e.at(s)}class pe{constructor(e){this.points=[...e.points].sort(de(s=>s.x))}at(e){if(this.points.length===0)throw new Error("Cannot evaluate a piecewise function with no points");const s=he(this.points.filter(a=>a.x<=e)),r=fe(this.points.filter(a=>a.x>e));return s==null?r.y:r==null?s.y:(r.y-s.y)*(e-s.x)/(r.x-s.x)+s.y}}class ge{constructor(e){this.then=null,this.now=e}tick(){const e=this.then;return this.then=this.now(),e==null?0:this.now()-e}}const ft=1e3,dt=60*ft,me=5*dt,ye=.5,Ct=new kt.Gapless5({tracks:[ae],loop:!0}),Et=new kt.Gapless5({tracks:[le]});function ke(){const[t,e]=se(!1);return j("div",{class:"centering-frame"},j("div",{style:{width:400,textAlign:"center",padding:"16px"}},j("div",null,j("button",{disabled:t,onClick:()=>{e(!0),be()}},"Begin"))))}function be(){const t=new ue({setBackgroundVolume:s=>Ct.setVolume(s*ye),program:new Jt({backgroundVolume:_e({points:[{x:0,y:0},{x:10*ft,y:1},{x:30*dt,y:1},{x:30*dt+20*ft,y:0}]})})});t.begin(),Ct.play(),Et.play();const e=new ge(Date.now);setInterval(()=>t.markTime(e.tick()),100),setInterval(()=>ve(Et),me)}function ve(t){t.stop(),t.play()}const _t=Symbol(),pt=Symbol(),gt=Symbol(),st=Symbol();function K(t,e){function s(...r){if(r.length>=t.length)return t(...r);{const a=(...o)=>s(...r,...o);return a[_t]=t,a[pt]=s,a[gt]=r,a[st]=s[st],a}}return s[_t]=t,s[pt]=s,s[gt]=[],s[st]=e||Te(t),s}function ut(t){return t[_t]}function Se(t){return t[pt]}function mt(t){return t[gt]||[]}function Te(t){return t[st]||t.name}class Pe extends Error{constructor(e){super("Expectation failed"),this.expectArgs=e}}const xe=K(function(t,e){return t(e)},"which"),it=K(function(t,e){var s,r;if(we(t))return t(e);if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((a,o)=>it(t[o],e[o]));if(t instanceof Function&&e instanceof Function)return ut(t)&&ut(t)===ut(e)?it(mt(t),mt(e)):t===e;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString();if(t instanceof Set&&e instanceof Set)return t.size===e.size&&[...t.values()].every(a=>e.has(a));if(t instanceof Error&&e instanceof Error)return t.message===e.message&&t.__proto__.constructor===e.__proto__.constructor;if(Ft(t)&&Ft(e)){const a=Object.keys(t),o=Object.keys(e);return a.length===o.length&&a.every(S=>it(t[S],e[S]))&&((s=t.__proto__)==null?void 0:s.constructor)===((r=e.__proto__)==null?void 0:r.constructor)}return t===e},"equals");K(function(t,e){return t===e},"is");K(function(t,e,...s){return!t(e,...s)},"not");K(function(t){return/^\s*$/.test(t)},"isBlank");function Ft(t){return!!t&&typeof t=="object"}function we(t){return t instanceof Function&&Se(t)===xe&&mt(t).length===1}K(function(e,s){return s.slice(0,e.length)===e?s.slice(e.length):s});K(function(e,s){return s instanceof Pe&&it(e,s.expectArgs)});te(j(ke,null),document.getElementById("app"));
