(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const S of o.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&r(S)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var at,x,Dt,J,kt,nt={},Rt=[],Jt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function O(t,e){for(var s in e)t[s]=e[s];return t}function Bt(t){var e=t.parentNode;e&&e.removeChild(t)}function K(t,e,s){var r,a,o,S={};for(o in e)o=="key"?r=e[o]:o=="ref"?a=e[o]:S[o]=e[o];if(arguments.length>2&&(S.children=arguments.length>3?at.call(arguments,2):s),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)S[o]===void 0&&(S[o]=t.defaultProps[o]);return Q(t,S,r,a,null)}function Q(t,e,s,r,a){var o={type:t,props:e,key:s,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++Dt};return a==null&&x.vnode!=null&&x.vnode(o),o}function X(t){return t.children}function Z(t,e){this.props=t,this.context=e}function z(t,e){if(e==null)return t.__?z(t.__,t.__.__k.indexOf(t)+1):null;for(var s;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null)return s.__e;return typeof t.type=="function"?z(t):null}function Ut(t){var e,s;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null){t.__e=t.__c.base=s.__e;break}return Ut(t)}}function bt(t){(!t.__d&&(t.__d=!0)&&J.push(t)&&!rt.__r++||kt!==x.debounceRendering)&&((kt=x.debounceRendering)||setTimeout)(rt)}function rt(){for(var t;rt.__r=J.length;)t=J.sort(function(e,s){return e.__v.__b-s.__v.__b}),J=[],t.some(function(e){var s,r,a,o,S,$;e.__d&&(S=(o=(s=e).__v).__e,($=s.__P)&&(r=[],(a=O({},o)).__v=o.__v+1,mt($,o,a,s.__n,$.ownerSVGElement!==void 0,o.__h!=null?[S]:null,r,S??z(o),o.__h),Wt(r,o),o.__e!=S&&Ut(o)))})}function qt(t,e,s,r,a,o,S,$,f,I){var n,p,y,u,_,N,k,L=r&&r.__k||Rt,E=L.length;for(s.__k=[],n=0;n<e.length;n++)if((u=s.__k[n]=(u=e[n])==null||typeof u=="boolean"?null:typeof u=="string"||typeof u=="number"||typeof u=="bigint"?Q(null,u,null,null,u):Array.isArray(u)?Q(X,{children:u},null,null,null):u.__b>0?Q(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u)!=null){if(u.__=s,u.__b=s.__b+1,(y=L[n])===null||y&&u.key==y.key&&u.type===y.type)L[n]=void 0;else for(p=0;p<E;p++){if((y=L[p])&&u.key==y.key&&u.type===y.type){L[p]=void 0;break}y=null}mt(t,u,y=y||nt,a,o,S,$,f,I),_=u.__e,(p=u.ref)&&y.ref!=p&&(k||(k=[]),y.ref&&k.push(y.ref,null,u),k.push(p,u.__c||_,u)),_!=null?(N==null&&(N=_),typeof u.type=="function"&&u.__k===y.__k?u.__d=f=Vt(u,f,t):f=Ht(t,u,y,L,_,f),typeof s.type=="function"&&(s.__d=f)):f&&y.__e==f&&f.parentNode!=t&&(f=z(y))}for(s.__e=N,n=E;n--;)L[n]!=null&&(typeof s.type=="function"&&L[n].__e!=null&&L[n].__e==s.__d&&(s.__d=z(r,n+1)),Ot(L[n],L[n]));if(k)for(n=0;n<k.length;n++)Gt(k[n],k[++n],k[++n])}function Vt(t,e,s){for(var r,a=t.__k,o=0;a&&o<a.length;o++)(r=a[o])&&(r.__=t,e=typeof r.type=="function"?Vt(r,e,s):Ht(s,r,r,a,r.__e,e));return e}function Ht(t,e,s,r,a,o){var S,$,f;if(e.__d!==void 0)S=e.__d,e.__d=void 0;else if(s==null||a!=o||a.parentNode==null)t:if(o==null||o.parentNode!==t)t.appendChild(a),S=null;else{for($=o,f=0;($=$.nextSibling)&&f<r.length;f+=2)if($==a)break t;t.insertBefore(a,o),S=o}return S!==void 0?S:a.nextSibling}function Xt(t,e,s,r,a){var o;for(o in s)o==="children"||o==="key"||o in e||ot(t,o,null,s[o],r);for(o in e)a&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||s[o]===e[o]||ot(t,o,e[o],s[o],r)}function vt(t,e,s){e[0]==="-"?t.setProperty(e,s):t[e]=s==null?"":typeof s!="number"||Jt.test(e)?s:s+"px"}function ot(t,e,s,r,a){var o;t:if(e==="style")if(typeof s=="string")t.style.cssText=s;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)s&&e in s||vt(t.style,e,"");if(s)for(e in s)r&&s[e]===r[e]||vt(t.style,e,s[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=s,s?r||t.addEventListener(e,o?Tt:St,o):t.removeEventListener(e,o?Tt:St,o);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=s??"";break t}catch{}typeof s=="function"||(s!=null&&(s!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,s):t.removeAttribute(e))}}function St(t){this.l[t.type+!1](x.event?x.event(t):t)}function Tt(t){this.l[t.type+!0](x.event?x.event(t):t)}function mt(t,e,s,r,a,o,S,$,f){var I,n,p,y,u,_,N,k,L,E,l,h,v,m=e.type;if(e.constructor!==void 0)return null;s.__h!=null&&(f=s.__h,$=e.__e=s.__e,e.__h=null,o=[$]),(I=x.__b)&&I(e);try{t:if(typeof m=="function"){if(k=e.props,L=(I=m.contextType)&&r[I.__c],E=I?L?L.props.value:I.__:r,s.__c?N=(n=e.__c=s.__c).__=n.__E:("prototype"in m&&m.prototype.render?e.__c=n=new m(k,E):(e.__c=n=new Z(k,E),n.constructor=m,n.render=Qt),L&&L.sub(n),n.props=k,n.state||(n.state={}),n.context=E,n.__n=r,p=n.__d=!0,n.__h=[]),n.__s==null&&(n.__s=n.state),m.getDerivedStateFromProps!=null&&(n.__s==n.state&&(n.__s=O({},n.__s)),O(n.__s,m.getDerivedStateFromProps(k,n.__s))),y=n.props,u=n.state,p)m.getDerivedStateFromProps==null&&n.componentWillMount!=null&&n.componentWillMount(),n.componentDidMount!=null&&n.__h.push(n.componentDidMount);else{if(m.getDerivedStateFromProps==null&&k!==y&&n.componentWillReceiveProps!=null&&n.componentWillReceiveProps(k,E),!n.__e&&n.shouldComponentUpdate!=null&&n.shouldComponentUpdate(k,n.__s,E)===!1||e.__v===s.__v){n.props=k,n.state=n.__s,e.__v!==s.__v&&(n.__d=!1),n.__v=e,e.__e=s.__e,e.__k=s.__k,e.__k.forEach(function(T){T&&(T.__=e)}),n.__h.length&&S.push(n);break t}n.componentWillUpdate!=null&&n.componentWillUpdate(k,n.__s,E),n.componentDidUpdate!=null&&n.__h.push(function(){n.componentDidUpdate(y,u,_)})}if(n.context=E,n.props=k,n.__v=e,n.__P=t,l=x.__r,h=0,"prototype"in m&&m.prototype.render)n.state=n.__s,n.__d=!1,l&&l(e),I=n.render(n.props,n.state,n.context);else do n.__d=!1,l&&l(e),I=n.render(n.props,n.state,n.context),n.state=n.__s;while(n.__d&&++h<25);n.state=n.__s,n.getChildContext!=null&&(r=O(O({},r),n.getChildContext())),p||n.getSnapshotBeforeUpdate==null||(_=n.getSnapshotBeforeUpdate(y,u)),v=I!=null&&I.type===X&&I.key==null?I.props.children:I,qt(t,Array.isArray(v)?v:[v],e,s,r,a,o,S,$,f),n.base=e.__e,e.__h=null,n.__h.length&&S.push(n),N&&(n.__E=n.__=null),n.__e=!1}else o==null&&e.__v===s.__v?(e.__k=s.__k,e.__e=s.__e):e.__e=Yt(s.__e,e,s,r,a,o,S,f);(I=x.diffed)&&I(e)}catch(T){e.__v=null,(f||o!=null)&&(e.__e=$,e.__h=!!f,o[o.indexOf($)]=null),x.__e(T,e,s)}}function Wt(t,e){x.__c&&x.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(r){r.call(s)})}catch(r){x.__e(r,s.__v)}})}function Yt(t,e,s,r,a,o,S,$){var f,I,n,p=s.props,y=e.props,u=e.type,_=0;if(u==="svg"&&(a=!0),o!=null){for(;_<o.length;_++)if((f=o[_])&&"setAttribute"in f==!!u&&(u?f.localName===u:f.nodeType===3)){t=f,o[_]=null;break}}if(t==null){if(u===null)return document.createTextNode(y);t=a?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,y.is&&y),o=null,$=!1}if(u===null)p===y||$&&t.data===y||(t.data=y);else{if(o=o&&at.call(t.childNodes),I=(p=s.props||nt).dangerouslySetInnerHTML,n=y.dangerouslySetInnerHTML,!$){if(o!=null)for(p={},_=0;_<t.attributes.length;_++)p[t.attributes[_].name]=t.attributes[_].value;(n||I)&&(n&&(I&&n.__html==I.__html||n.__html===t.innerHTML)||(t.innerHTML=n&&n.__html||""))}if(Xt(t,y,p,a,$),n)e.__k=[];else if(_=e.props.children,qt(t,Array.isArray(_)?_:[_],e,s,r,a&&u!=="foreignObject",o,S,o?o[0]:s.__k&&z(s,0),$),o!=null)for(_=o.length;_--;)o[_]!=null&&Bt(o[_]);$||("value"in y&&(_=y.value)!==void 0&&(_!==t.value||u==="progress"&&!_||u==="option"&&_!==p.value)&&ot(t,"value",_,p.value,!1),"checked"in y&&(_=y.checked)!==void 0&&_!==t.checked&&ot(t,"checked",_,p.checked,!1))}return t}function Gt(t,e,s){try{typeof t=="function"?t(e):t.current=e}catch(r){x.__e(r,s)}}function Ot(t,e,s){var r,a;if(x.unmount&&x.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Gt(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){x.__e(o,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&Ot(r[a],e,typeof t.type!="function");s||t.__e==null||Bt(t.__e),t.__=t.__e=t.__d=void 0}function Qt(t,e,s){return this.constructor(t,s)}function Zt(t,e,s){var r,a,o;x.__&&x.__(t,e),a=(r=typeof s=="function")?null:s&&s.__k||e.__k,o=[],mt(e,t=(!r&&s||e).__k=K(X,null,[t]),a||nt,nt,e.ownerSVGElement!==void 0,!r&&s?[s]:a?null:e.firstChild?at.call(e.childNodes):null,o,!r&&s?s:a?a.__e:e.firstChild,r),Wt(o,t)}at=Rt.slice,x={__e:function(t,e,s,r){for(var a,o,S;e=e.__;)if((a=e.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(t)),S=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,r||{}),S=a.__d),S)return a.__E=a}catch($){t=$}throw t}},Dt=0,Z.prototype.setState=function(t,e){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=O({},this.state),typeof t=="function"&&(t=t(O({},s),this.props)),t&&O(s,t),t!=null&&this.__v&&(e&&this.__h.push(e),bt(this))},Z.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),bt(this))},Z.prototype.render=X,J=[],rt.__r=0;var Kt,R,ut,Pt,xt=0,jt=[],tt=[],wt=x.__b,At=x.__r,$t=x.diffed,Lt=x.__c,It=x.unmount;function te(t,e){x.__h&&x.__h(R,t,xt||e),xt=0;var s=R.__H||(R.__H={__:[],__h:[]});return t>=s.__.length&&s.__.push({__V:tt}),s.__[t]}function ee(t,e,s){var r=te(Kt++,2);if(r.t=t,!r.__c&&(r.__=[s?s(e):ne(void 0,e),function(o){var S=r.__N?r.__N[0]:r.__[0],$=r.t(S,o);S!==$&&(r.__N=[$,r.__[1]],r.__c.setState({}))}],r.__c=R,!R.u)){R.u=!0;var a=R.shouldComponentUpdate;R.shouldComponentUpdate=function(o,S,$){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(n){return n.__c});if(f.every(function(n){return!n.__N}))return!a||a.call(this,o,S,$);var I=!1;return f.forEach(function(n){if(n.__N){var p=n.__[0];n.__=n.__N,n.__N=void 0,p!==n.__[0]&&(I=!0)}}),!!I&&(!a||a.call(this,o,S,$))}}return r.__N||r.__}function se(){for(var t;t=jt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(et),t.__H.__h.forEach(ct),t.__H.__h=[]}catch(e){t.__H.__h=[],x.__e(e,t.__v)}}x.__b=function(t){typeof t.type!="function"||t.o||t.type===X?t.o||(t.o=t.__&&t.__.o?t.__.o:""):t.o=(t.__&&t.__.o?t.__.o:"")+(t.__&&t.__.__k?t.__.__k.indexOf(t):0),R=null,wt&&wt(t)},x.__r=function(t){At&&At(t),Kt=0;var e=(R=t.__c).__H;e&&(ut===R?(e.__h=[],R.__h=[],e.__.forEach(function(s){s.__N&&(s.__=s.__N),s.__V=tt,s.__N=s.i=void 0})):(e.__h.forEach(et),e.__h.forEach(ct),e.__h=[])),ut=R},x.diffed=function(t){$t&&$t(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(jt.push(e)!==1&&Pt===x.requestAnimationFrame||((Pt=x.requestAnimationFrame)||ie)(se)),e.__H.__.forEach(function(s){s.i&&(s.__H=s.i),s.__V!==tt&&(s.__=s.__V),s.i=void 0,s.__V=tt})),ut=R=null},x.__c=function(t,e){e.some(function(s){try{s.__h.forEach(et),s.__h=s.__h.filter(function(r){return!r.__||ct(r)})}catch(r){e.some(function(a){a.__h&&(a.__h=[])}),e=[],x.__e(r,s.__v)}}),Lt&&Lt(t,e)},x.unmount=function(t){It&&It(t);var e,s=t.__c;s&&s.__H&&(s.__H.__.forEach(function(r){try{et(r)}catch(a){e=a}}),s.__H=void 0,e&&x.__e(e,s.__v))};var Mt=typeof requestAnimationFrame=="function";function ie(t){var e,s=function(){clearTimeout(r),Mt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(s,100);Mt&&(e=requestAnimationFrame(s))}function et(t){var e=R,s=t.__c;typeof s=="function"&&(t.__c=void 0,s()),R=e}function ct(t){var e=R;t.__c=t.__(),R=e}function ne(t,e){return typeof e=="function"?e(t):e}var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yt={};(function(t){const e={},s={None:0,Loading:1,Starting:2,Play:3,Stop:4,Error:5},r={Debug:1,Info:2,Warning:3,Error:4,None:5},a={None:1,Linear:2,EqualPower:3};function o(f,I,n){this.audioPath=n,this.trackName=n.replace(/^.*[\\/]/,"").split(".")[0];const p=f,y=I;let u=null,_=null,N=null,k=null,L=null,E=0,l=0,h=0,v=s.None,m=s.None,T=0,C=null,M=1,B=0,q=0;this.setCrossfade=(g,A,w=!0)=>{if(B=g,q=A,h>0){const F=B+q;F>h&&(y.warn(`Crossfade total exceeds duration (${F} > ${h}), clamping for ${this.audioPath}`),B=Math.min(g,h/2),q=Math.min(A,h/2))}w&&b((h-l)/1e3)},this.calcFadeAmount=g=>{const A=Math.max(0,Math.min(1,g));return p.crossfadeShape===a.Linear?1-A:p.crossfadeShape===a.EqualPower?1-Math.sqrt(A):0},this.getVolume=()=>{M=1;const g=l*p.playbackRate,A=h*p.playbackRate;g<B&&(M=M-this.calcFadeAmount(g/B));const w=A-g;return w<q&&(M=M-this.calcFadeAmount(w/q)),Math.min(1,Math.max(0,M*p.volume))};const U=g=>{m!==g&&g===s.Play&&(E=new Date().getTime()),m=g,v=s.None,p.uiDirty=!0};this.getState=()=>m,this.unload=g=>{this.stop(),U(g?s.Error:s.None),k&&k.abort(),u=null,_=null,N=null,l=0,h=0,T=0,L&&(L.disconnect(),L=null),p.onunload(this.audioPath)};const V=()=>{m===s.Play&&p.onEndedCallback()},H=g=>g?g.message?g.message:g.target&&g.target.error&&g.target.error.message?g.target.error.message:g:"Error playing Gapless 5 audio",G=g=>{const A=H(g);y.error(A),this.unload(!0),p.onerror(this.audioPath,A)},Y=g=>g/100>=4,i=g=>{k&&(k=null,N=g,h=g.duration*1e3,L||(L=p.context.createGain(),L.connect(p.context.destination)),L.gain.value=this.getVolume(),v===s.Play&&m===s.Loading?(this.setCrossfade(B,q),D(!0)):u!==null&&v===s.None&&this.inPlayState(!0)&&(y.debug(`Switching from HTML5 to WebAudio: ${this.audioPath}`),U(s.Stop),this.play(!0)),m===s.Loading&&(m=s.Stop),p.onload(this.audioPath,!0),p.playlist.updateLoading(),p.uiDirty=!0)},c=()=>{h=u.duration*1e3},d=()=>{m===s.Loading&&(m=s.Stop,h=u.duration*1e3,v===s.Play&&(this.setCrossfade(B,q),D(!0)),p.onload(this.audioPath,!1),p.playlist.updateLoading(),p.uiDirty=!0)};this.stop=(g=!1)=>{m!==s.None&&(y.debug(`Stopping: ${this.audioPath}`),u&&u.pause(),_&&(C&&(window.clearTimeout(C),C=null),_.stop(0),_.disconnect()),U(s.Stop),g&&(this.setPosition(0),this.setCrossfade(0,0,!1)))};const b=g=>{if(C&&window.clearTimeout(C),this.inPlayState(!0)){const A=Math.max(0,g/p.playbackRate-q/1e3);y.debug(`onEnded() will be called on ${this.audioPath} in ${A.toFixed(2)} sec`),C=window.setTimeout(V,A*1e3)}},P=(g,A)=>g&&u?u.currentTime?(u.currentTime+A)*1e3+p.avgTickMS:0:l,D=g=>{if(this.inPlayState(!0))return;l=Math.max(l,0),(!Number.isFinite(l)||l>=this.getLength())&&(l=0);const A=p.isSingleLoop();if(N!==null)U(s.Starting),p.context.resume().then(()=>{if(m===s.Starting){L.gain.value=this.getVolume(),_&&(_.stop(),_.disconnect()),_=p.context.createBufferSource(),_.buffer=N,_.playbackRate.value=p.playbackRate,_.loop=A,_.connect(L);const w=P(g,p.context.baseLatency)/1e3;y.debug(`Playing WebAudio${A?" (looped)":""}: ${this.audioPath} at ${w.toFixed(2)} sec`),_.start(0,w),U(s.Play),p.onplay(this.audioPath),b(_.buffer.duration-w),u&&u.pause()}else _&&(_.stop(),_.disconnect())});else if(u!==null){const w=l/1e3;u.currentTime=w,u.volume=this.getVolume(),u.loop=A,u.playbackRate=p.playbackRate,U(s.Starting),u.play().then(()=>{m===s.Starting?(y.debug(`Playing HTML5 Audio${A?" (looped)":""}: ${this.audioPath} at ${w.toFixed(2)} sec`),U(s.Play),p.onplay(this.audioPath),b(u.duration-w)):u&&u.pause()}).catch(F=>{F.name!=="AbortError"&&y.warn(`Failed to play ${this.audioPath}: ${F.message}`)})}};this.inPlayState=g=>m===s.Play||g&&m===s.Starting,this.isPlayActive=g=>this.inPlayState(g)||v===s.Play,this.getPosition=()=>l,this.getLength=()=>h,this.play=g=>{p.onPlayAllowed(),m===s.Loading?(y.debug(`Loading ${this.audioPath}`),v=s.Play):D(g)},this.setPlaybackRate=g=>{_&&(_.playbackRate.value=g),u&&(u.playbackRate=g),b((h-l)/1e3)},this.tick=g=>{if(m===s.Play){const A=new Date().getTime(),w=A-E;if(l=l+w*p.playbackRate,E=A,g){const F=p.isSingleLoop();_&&_.loop!==F&&(_.loop=F,y.debug(`Setting WebAudio loop to ${F}`)),u&&u.loop!==F&&(u.loop=F,y.debug(`Setting HTML5 audio loop to ${F}`))}if(u!==null&&(u.volume=this.getVolume()),L!==null){const{currentTime:F}=window.gapless5AudioContext;L.gain.linearRampToValueAtTime(this.getVolume(),F+p.tickMS/1e3)}}if(T<1){const{Starting:A,Play:w,Stop:F}=s;p.useWebAudio&&[A,w,F].includes(m)?T=1:p.useHTML5Audio&&u!==null&&u.seekable.length>0?(T=u.seekable.end(u.seekable.length-1)/u.duration,Number.isFinite(T)||(T=0)):T=0}return T},this.getSeekablePercent=()=>T,this.setPosition=(g,A)=>{A&&this.inPlayState()?(this.stop(),l=g,this.play()):l=g};const W=(g,A)=>{fetch(g).then(w=>{w.ok?w.blob().then(F=>{A(F)}):G(w.statusUI)}).catch(w=>{G(w)})};this.load=()=>{if(m!==s.None)return;const{audioPath:g}=this;if(p.onloadstart(g),m=s.Loading,p.useWebAudio){const A=w=>{w&&p.context.decodeAudioData(w).then(F=>{i(F)})};g.startsWith("blob:")?W(g,w=>{k=new FileReader,k.onload=()=>{k&&A(k.result)},k.readAsArrayBuffer(w),k.error&&G(k.error)}):(k=new XMLHttpRequest,k.open("get",g,!0),k.responseType="arraybuffer",k.onload=()=>{k&&A(k.response)},k.onerror=()=>{k&&G("Failed to load audio track")},k.onloadend=()=>{k&&Y(k.status)&&G("Failed to load audio track")},k.send())}if(p.useHTML5Audio){const A=()=>{const w=new Audio;return w.controls=!1,w.preservesPitch=!1,w.mozPreservesPitch=!1,w.webkitPreservesPitch=!1,w.addEventListener("loadedmetadata",c,!1),w.addEventListener("canplaythrough",d,!1),w.addEventListener("error",G,!1),w};g.startsWith("blob:")?W(g,w=>{u=A(),u.srcObject=w,u.load()}):(u=A(),u.src=g,u.load())}}}function S(f,I,n,p=-1,y=[],u=0){const _=f,N=I;this.sources=[],this.startingTrack=0,this.trackNumber=-1,this.shuffledIndices=[],this.shuffleMode=!!n,this.shuffleRequest=null,this.preserveCurrent=!0,this.loadLimit=p,this.setStartingTrack=l=>{l==="random"?this.startingTrack=Math.floor(Math.random()*this.sources.length):this.startingTrack=l||0,N.debug(`Setting starting track to ${this.startingTrack}`),this.trackNumber=this.startingTrack},this.currentSource=()=>{if(this.numTracks()===0)return null;const{source:l}=this.getSourceIndexed(this.trackNumber);return l},this.isLastTrack=l=>l===this.sources.length-1&&!_.loop&&_.queuedTrack===null,this.setCrossfade=(l,h)=>{this.currentSource().setCrossfade(l,this.isLastTrack(this.trackNumber)?0:h)},this.gotoTrack=(l,h,v,m)=>{const{index:T,source:C}=this.getSourceIndexed(this.trackNumber),M=C.isPlayActive(!0),B=this.indexFromTrack(l);this.stopAllTracks(!0,m?[_.fadingTrack]:[]);const q=H=>this.shuffleRequest!==null?this.shuffleRequest?(this.shuffleRequest=null,k(H)):(this.shuffleRequest=null,L(H)):H;this.trackNumber=v?q(B):B,N.debug(`Setting track number to ${this.trackNumber}`),this.updateLoading(),_.scrub(0,!0);const{index:U,source:V}=this.getSourceIndexed(this.trackNumber);if(T===U)return(h||M)&&(C.stop(),C.play()),this.trackNumber;if(m||C.stop(!0),h||M){const H=m?_.crossfade:0,G=m&&!this.isLastTrack(U)?_.crossfade:0;V.setCrossfade(H,G),V.play()}return this.trackNumber};const k=l=>{const h=Array.from(Array(this.sources.length).keys());for(let v=0;v<h.length-1;v++){const m=v+Math.floor(Math.random()*(h.length-v));[h[m],h[v]]=[h[v],h[m]]}if(this.preserveCurrent&&this.trackNumber===h[l]&&([h[this.trackNumber],h[l]]=[h[l],h[this.trackNumber]]),JSON.stringify(h)===JSON.stringify(Array.from(Array(this.sources.length).keys()))){const v=h.filter(B=>B!==this.trackNumber),m=Math.floor(Math.random()*v.length),T=(m+1)%v.length,C=h[v[m]],M=h[v[T]];[h[C],h[M]]=[h[M],h[C]]}return this.shuffledIndices=h,this.shuffleMode=!0,N.debug(`Shuffled tracks: ${this.shuffledIndices}`),l},L=l=>(this.shuffleMode=!1,N.debug("Disabling shuffle"),this.preserveCurrent&&this.shuffledIndices[this.trackNumber]===l?(l+1)%this.numTracks():l);this.lastIndex=(l,h,v)=>{const m=h[l];for(let T=0;T<v.length;T++)if(v[T].index===m.index)return T;return 0},this.stopAllTracks=(l,h=[])=>{for(let v=0;v<this.sources.length;v++)h.includes(this.getPlaylistIndex(v))||this.sources[v].stop(l)},this.removeAllTracks=l=>{for(let h=0;h<this.sources.length;h++)this.sources[h].unload();l&&(this.shuffledIndices=[],this.setStartingTrack(-1)),this.sources=[]},this.setPlaybackRate=l=>{for(let h=0;h<this.sources.length;h++)this.sources[h].setPlaybackRate(l)},this.setShuffle=(l,h=!0)=>{this.shuffleRequest=l,this.preserveCurrent=h,h||k(this.trackNumber)},this.isShuffled=()=>this.shuffleRequest!==null?this.shuffleRequest:this.shuffleMode,this.numTracks=()=>this.sources.length,this.getTracks=()=>{const l=[];for(let h=0;h<this.numTracks();h++){const{source:v}=this.getSourceIndexed(h);l.push(v.audioPath)}return l},this.indexFromTrack=l=>typeof l=="string"?this.findTrack(l):l,this.findTrack=l=>this.getTracks().indexOf(l),this.getSourceIndexed=l=>{const h=this.shuffleMode?this.shuffledIndices[l]:l;return{index:h,source:this.sources[h]}},this.getPlaylistIndex=l=>this.shuffleMode?this.shuffledIndices.indexOf(l):l;const E=(l,h)=>Array.from({length:1+h-l},(v,m)=>m+l);if(this.loadableTracks=()=>{if(this.loadLimit===-1)return new Set(E(0,this.sources.length));const l=Math.round(Math.max(0,this.trackNumber-(this.loadLimit-1)/2)),h=Math.round(Math.min(this.sources.length,this.trackNumber+this.loadLimit/2)),v=new Set(E(l,h));return _.queuedTrack!==null&&v.add(this.indexFromTrack(_.queuedTrack)),_.fadingTrack!==null&&v.add(this.indexFromTrack(_.fadingTrack)),N.debug(`Loadable indices: ${JSON.stringify([...v])}`),v},this.updateLoading=()=>{const l=this.loadableTracks(),h=this.getPlaylistIndex(this.trackNumber),v=this.sources[h];if(l.has(h)&&v.getState()===s.None)N.debug(`Loading track ${h}: ${v.audioPath}`),v.load();else for(const[m,T]of this.sources.entries()){const C=this.getPlaylistIndex(m),M=l.has(C),B=T.getState()!==s.None;M!==B&&(M?(N.debug(`Loading track ${C}: ${T.audioPath}`),T.load()):(T.unload(),N.debug(`Unloaded track ${C}: ${T.audioPath}`)))}},this.add=(l,h)=>{const v=new o(_,N,h);this.sources.splice(l,0,v),this.shuffledIndices.splice(Math.floor(Math.random()*this.numTracks()),0,this.numTracks()-1),(l<=this.trackNumber||this.trackNumber===-1)&&(this.trackNumber=this.trackNumber+1,this.trackNumber>0&&N.debug(`Insertion shifted current track number to ${this.trackNumber}`)),this.updateLoading()},this.remove=l=>{this.sources.splice(l,1),this.shuffledIndices.splice(this.shuffledIndices.indexOf(l),1);for(let h=0;h<this.shuffledIndices.length;h++)this.shuffledIndices[h]>=l&&(this.shuffledIndices[h]=this.shuffledIndices[h]-1);this.trackNumber>0&&(l<this.trackNumber||l>=this.numTracks()-2)&&(this.trackNumber=this.trackNumber-1,N.debug(`Decrementing track number to ${this.trackNumber}`)),this.isShuffled&&!_.canShuffle()&&(this.setShuffle(!1),_.uiDirty=!0),this.updateLoading()},y.length>0){for(let l=0;l<y.length;l++)this.sources.push(new o(_,N,y[l])),this.shuffledIndices.splice(Math.floor(Math.random()*this.numTracks()),0,this.numTracks()-1);this.setStartingTrack(u),this.updateLoading()}}function $(f={},I={}){typeof f=="string"&&(console.warn('Using deprecated API.  Pass element id into options as "guiId"'),f={...I,guiId:f});const n=65535,p={loading:"loading…",error:"error!",percent:0};this.hasGUI=!1,this.scrubWidth=0,this.scrubPosition=0,this.isScrubbing=!1;let y=null;this.tickMS=27,this.avgTickMS=this.tickMS,this.initialized=!1,this.uiDirty=!0;const u={debug:()=>{},log:()=>{},warn:()=>{},error:()=>{}};switch(f.logLevel||r.Info){case r.Debug:u.debug=console.debug;case r.Info:u.info=console.info;case r.Warning:u.warn=console.warn;case r.Error:u.error=console.error;case r.None:}this.playlist=null,this.loop=f.loop||!1,this.singleMode=f.singleMode||!1,this.exclusive=f.exclusive||!1,this.queuedTrack=null,this.fadingTrack=null,this.volume=f.volume!==void 0?f.volume:1,this.crossfade=f.crossfade||0,this.crossfadeShape=f.crossfadeShape||a.None;const _="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";let N=!1;const k=new Audio;if(k.controls=!1,k.loop=!0,k.src=_,k.load(),this.onPlayAllowed=()=>{N||(N=!0,k.play().then(()=>{k.pause()}))},this.useWebAudio=f.useWebAudio!==!1,this.useHTML5Audio=f.useHTML5Audio!==!1,this.playbackRate=f.playbackRate||1,this.id=f.guiId||Math.floor((1+Math.random())*65536),e[this.id]=this,window.gapless5AudioContext===void 0){const i=window.AudioContext||window.webkitAudioContext;i&&(window.gapless5AudioContext=new i)}this.context=window.gapless5AudioContext,this.keyMappings={},this.onprev=(i,c)=>{},this.onplayrequest=i=>{},this.onplay=i=>{},this.onpause=i=>{},this.onstop=i=>{},this.onnext=(i,c)=>{},this.ontimeupdate=(i,c)=>{},this.onerror=(i,c)=>{},this.onloadstart=i=>{},this.onload=(i,c)=>{},this.onunload=i=>{},this.onfinishedtrack=i=>{},this.onfinishedall=()=>{};const L=()=>{if(!this.currentSource()||!this.currentLength())return 0;const{isScrubbing:i,scrubPosition:c}=this;return(i?c:this.currentPosition())/this.currentLength()*n},E=i=>i/n*this.currentLength();this.getIndex=(i=!1)=>{if(this.playlist!==null){const{trackNumber:c}=this.playlist;return i?this.playlist.getSourceIndexed(c).index:c}return-1};const l=i=>{let c=Math.floor(i/6e4);const d=(i-c*6e4)/1e3;let b=Math.floor(d),P=Math.floor((d-b)*100);return c<10&&(c=`0${c}`),b<10&&(b=`0${b}`),P<10&&(P=`0${P}`),`${c}:${b}.${P}`},h=()=>{let i=p.loading;if(this.totalTracks()===0)return i;const c=this.currentLength();return this.currentSource()&&this.currentSource().state===s.Error?i=p.error:c>0&&(i=l(c)),i},v=()=>{const i=this.currentSource();return i?i.trackName:""},m=i=>document.getElementById(`g5${i}-${this.id}`),T=(i,c)=>{const d=m(i);d&&(d.innerText=c)},C=i=>i>=0&&i<this.playlist.numTracks();this.totalTracks=()=>this.playlist!==null?this.playlist.numTracks():0,this.isSingleLoop=()=>this.loop&&(this.singleMode||this.totalTracks()===1),this.mapKeys=i=>{for(const c in i){const d=i[c].toUpperCase().charCodeAt(0),b=i[c].toLowerCase().charCodeAt(0),P=e[this.id];$.prototype.hasOwnProperty.call(P,c)?(this.keyMappings[d]=P[c],this.keyMappings[b]=P[c]):u.error(`Gapless5 mapKeys() error: no function named '${c}'`)}document.addEventListener("keydown",c=>{const d=c.key.charCodeAt(0);d in this.keyMappings&&this.keyMappings[d](c)})},this.getPosition=()=>this.currentSource()?this.currentSource().getPosition():0,this.setPosition=i=>{this.currentSource()&&this.currentSource().setPosition(i,!0)},this.setVolume=i=>{this.volume=Math.min(Math.max(i,0),1),this.hasGUI&&(m("volume").value=n*this.volume)},this.setGain=i=>{u.warn("Using deprecated API.  Use setVolume() with value between 0 and 1 instead."),this.setVolume(i/n)},this.scrub=(i,c=!1)=>{this.hasGUI&&(this.scrubPosition=E(i),T("position",l(this.scrubPosition)),M("prev",this.loop||this.getIndex()!==0||this.scrubPosition!==0),c&&(m("transportbar").value=i),!this.isScrubbing&&this.currentSource()&&this.currentSource().setPosition(this.scrubPosition))},this.setLoadedSpan=i=>{this.hasGUI&&p.percent!==i&&(p.percent=i,m("loadedspan").style.width=i*this.scrubWidth,i===1&&T("duration",h()))},this.getSeekablePercent=()=>{const i=this.currentSource();return i?i.getSeekablePercent():0},this.onEndedCallback=()=>{let i=!1;const c=this.currentSource();if(c){const{audioPath:d}=c;if(this.queuedTrack!==null)this.gotoTrack(this.queuedTrack),this.queuedTrack=null;else if(this.loop||this.getIndex()<this.totalTracks()-1)if(this.singleMode||this.totalTracks()===1)this.loop&&this.prev(null,!1);else{const b=()=>{const P=U();P&&P.stop(!0),this.fadingTrack=null};this.fadingTrack=this.getIndex(),window.setTimeout(()=>{b()},this.crossfade),this.next(null,!0,!0)}else c.stop(!0),this.scrub(0,!0),i=!0;this.onfinishedtrack(d)}i&&this.onfinishedall()},this.onStartedScrubbing=()=>{this.isScrubbing=!0},this.onFinishedScrubbing=()=>{this.isScrubbing=!1;const i=this.currentSource();i&&(i.inPlayState()&&this.scrubPosition>=this.currentLength()?this.next(null,!0):i.setPosition(this.scrubPosition,!0))},this.addTrack=i=>{const c=this.playlist.numTracks();this.playlist.add(c,i),this.uiDirty=!0},this.insertTrack=(i,c)=>{const d=this.totalTracks(),b=Math.min(Math.max(i,0),d);b===d?this.addTrack(c):this.playlist.add(b,c),this.uiDirty=!0},this.getTracks=()=>this.playlist.getTracks(),this.getTrack=()=>this.currentSource()?this.currentSource().audioPath:"",this.findTrack=i=>this.playlist.findTrack(i),this.removeTrack=i=>{const c=this.playlist.indexFromTrack(i);if(!C(c)){u.warn(`Cannot remove missing track: ${i}`);return}const d=c===this.playlist.trackNumber,{source:b}=this.playlist.getSourceIndexed(c);if(!b)return;let P=!1;b.state===s.Loading?b.unload():b.inPlayState(!0)&&(P=!0,b.stop()),this.playlist.remove(c),d&&(this.next(),P&&this.play()),this.uiDirty=!0},this.replaceTrack=(i,c)=>{this.removeTrack(i),this.insertTrack(i,c)},this.removeAllTracks=(i=!0)=>{this.playlist.removeAllTracks(i),this.uiDirty=!0},this.isShuffled=()=>this.playlist.isShuffled(),this.shuffle=(i=!0)=>{this.canShuffle()&&(this.playlist.setShuffle(!0,i),this.uiDirty=!0)},this.toggleShuffle=()=>{this.canShuffle()&&(this.playlist.setShuffle(!this.isShuffled()),this.uiDirty=!0)},this.shuffleToggle=this.toggleShuffle,this.currentSource=()=>this.playlist?this.playlist.currentSource():null,this.currentLength=()=>this.currentSource()?this.currentSource().getLength():0,this.currentPosition=()=>this.currentSource()?this.currentSource().getPosition():0,this.setPlaybackRate=i=>{H(),this.playbackRate=i,this.playlist.setPlaybackRate(i)},this.setCrossfade=i=>{if(this.crossfade=i,this.isPlaying()){const c=this.crossfade;this.playlist.setCrossfade(c,c)}},this.setCrossfadeShape=i=>{this.crossfadeShape=i},this.queueTrack=i=>{C(this.playlist.indexFromTrack(i))?(this.queuedTrack=i,this.playlist.updateLoading()):u.error(`Cannot queue missing track: ${i}`)},this.gotoTrack=(i,c,d=!1,b=!1)=>{if(!C(this.playlist.indexFromTrack(i)))u.error(`Cannot go to missing track: ${i}`);else{const P=this.playlist.gotoTrack(i,c,d,b);M("prev",this.loop||!this.singleMode&&P>0),M("next",this.loop||!this.singleMode&&P<this.totalTracks()-1),this.uiDirty=!0}},this.prevtrack=()=>{const i=this.currentSource();if(!i)return;let c=0;if(this.getIndex()>0)c=this.getIndex()-1;else if(this.loop)c=this.totalTracks()-1;else return;this.gotoTrack(c);const d=this.currentSource();this.onprev(i.audioPath,d.audioPath)},this.prev=(i,c)=>{const d=this.currentSource();if(!d)return;let b=!0,P=0,D=this.getIndex();if(d.getPosition()>0)this.scrub(0,!0),d.setPosition(0,c||!!i),this.playlist.setCrossfade(0,this.crossfade),P=D,b=!1;else if(this.singleMode&&this.loop)P=D;else if(D>0)P=D-1;else if(this.loop)P=this.totalTracks()-1;else return;if(b){this.gotoTrack(P,c,!0);const g=this.currentSource();this.onprev(d.audioPath,g.audioPath)}},this.next=(i,c,d)=>{const b=this.currentSource();if(!b)return;let P=0,D=this.getIndex();if(this.singleMode)P=D;else if(D<this.totalTracks()-1)P=D+1;else if(!this.loop)return;this.gotoTrack(P,c,!0,d);const W=this.currentSource();this.onnext(b.audioPath,W.audioPath)},this.play=()=>{const i=this.currentSource();if(i){if(this.playlist.setCrossfade(0,this.crossfade),i.play(),this.exclusive){const{id:c}=this;for(const d in e)d!==c.toString()&&e[d].stop()}this.onplayrequest(i.audioPath)}},this.playpause=()=>{const i=this.currentSource();i&&i.inPlayState(!0)?this.pause():this.play()},this.cue=()=>{this.currentPosition()>0&&this.prev(null,!0),this.play()},this.pause=()=>{const i=this.currentSource();this.playlist.stopAllTracks(),i&&this.onpause(i.audioPath)},this.stop=()=>{const i=this.currentSource(),c=i?i.getPosition():0;this.playlist.stopAllTracks(!0),i&&(c>0&&this.scrub(0,!0),this.onstop(i.audioPath))},this.isPlaying=()=>this.currentSource()&&this.currentSource().inPlayState()||!1;const M=(i,c)=>{if(this.hasGUI){const d=m(i);if(d){const{classList:b}=d;b.remove(c?"disabled":"enabled"),b.add(c?"enabled":"disabled")}}},B=(i,c)=>{const d=m("shuffle");if(d){const b=i==="shuffle";d.classList.remove(b?"g5unshuffle":"g5shuffle"),d.classList.add(b?"g5shuffle":"g5unshuffle"),M("shuffle",c)}};this.canShuffle=()=>this.totalTracks()>2;const q=()=>{if(!this.hasGUI)return;const i=this.totalTracks();if(i===0)T("index","0"),T("numtracks","0"),T("trackname",""),T("position",l(0)),T("duration",l(0)),M("prev",!1),B("shuffle",!1),M("next",!1);else{T("index",this.playlist.trackNumber+1),T("numtracks",i),T("trackname",v()),T("duration",h()),M("prev",this.loop||this.getIndex()>0||this.currentPosition()>0),M("next",this.loop||this.getIndex()<i-1);const c=this.currentSource();c&&c.inPlayState(!0)?M("play",!1):(M("play",!0),c&&c.state===s.Error&&this.onerror(c.audioPath)),B(this.isShuffled()?"unshuffle":"shuffle",this.canShuffle())}},U=()=>{if(this.fadingTrack!==null){const{source:i}=this.playlist.getSourceIndexed(this.fadingTrack);return i}return null},V={time:-1,index:-1,position:-1},H=()=>{const i=Date.now();if(V.time>=0){const D=i-V.time;this.avgTickMS=this.avgTickMS*.9+D*.1}V.time=i;const c=U();c&&c.tick(!1);const d=this.currentSource();if(d){const D=d.tick(!0);if(this.setLoadedSpan(D),this.uiDirty&&(this.uiDirty=!1,q()),d.inPlayState()){let W=d.getPosition();this.isScrubbing&&(W=this.scrubPosition),this.hasGUI&&(m("transportbar").value=L(),T("position",l(W)))}}const b=this.getIndex(),P=this.getPosition();(V.index!==b||V.position!==P)&&(V.index=b,V.position=P,this.ontimeupdate(P,b)),y&&window.clearTimeout(y),y=window.setTimeout(H,this.tickMS)},G=i=>{const{id:c}=this,d=P=>`g5${P}-${c}`,b=P=>`
    <div class="g5positionbar" id="${d("positionbar")}">
      <span id="${d("position")}">${l(0)}</span> |
      <span id="${d("duration")}">${p.loading}</span> |
      <span id="${d("index")}">1</span>/<span id="${d("numtracks")}">1</span>
    </div>
    <div class="g5inside" id="${d("inside")}">
      ${P}
    </div>
  `;return typeof Audio>"u"?(this.hasGUI=!1,b("This player is not supported by your browser.")):b(`
    <div class="g5transport">
      <div class="g5meter" id="${d("meter")}"><span id="${d("loadedspan")}" style="width: 0%"></span></div>
      <input type="range" class="transportbar" name="transportbar" id="${d("transportbar")}"
        min="0" max="${n}" value="0" oninput="${i}.scrub(this.value);"
        onmousedown="${i}.onStartedScrubbing();" ontouchstart="${i}.onStartedScrubbing();"
        onmouseup="${i}.onFinishedScrubbing();" ontouchend="${i}.onFinishedScrubbing();"
      />
    </div>
    <div class="g5buttons" id="${d("buttons")}">
      <button class="g5button g5prev" id="${d("prev")}"></button>
      <button class="g5button g5play" id="${d("play")}"></button>
      <button class="g5button g5stop" id="${d("stop")}"></button>
      <button class="g5button g5shuffle" id="${d("shuffle")}"></button>
      <button class="g5button g5next" id="${d("next")}"></button>
      <input type="range" id="${d("volume")}" class="volume" name="gain" min="0" max="${n}"
        value="${n}" oninput="${i}.setVolume(this.value / ${n});"
      />
    </div>
  `)},Y=f.guiId?document.getElementById(f.guiId):null;if(Y){this.hasGUI=!0,Y.insertAdjacentHTML("beforeend",G(`gapless5Players['${this.id}']`));const i=(c,d)=>{const b=m(c);b&&b.addEventListener("mousedown",d)};if(i("prev",this.prev),i("play",this.playpause),i("stop",this.stop),i("shuffle",this.toggleShuffle),i("next",this.next),M("play",!0),M("stop",!0),T("position",l(0)),f.shuffleButton===!1){const c=(P,D)=>{const W=m(P);W&&(W.style.width=D)},d="111px",b="115px";c("transportbar",d),c("meter",d),c("positionbar",b),c("inside",b),m("shuffle").remove()}this.scrubWidth=m("transportbar").style.width}if(typeof Audio>"u"){u.error("This player is not supported by your browser.");return}if("startingTrack"in f&&(typeof f.startingTrack=="number"?this.startingTrack=f.startingTrack:typeof f.startingTrack=="string"&&f.startingTrack==="random"&&(this.startingTrack="random")),"mapKeys"in f&&this.mapKeys(f.mapKeys),"tracks"in f){let i=[],c=0;if(Array.isArray(f.tracks)){if(typeof f.tracks[0]=="string"){i=f.tracks;for(let d=0;d<f.tracks.length;d++)i[d]=f.tracks[d];c=this.startingTrack||0}else if(typeof f.tracks[0]=="object"){for(let d=0;d<f.tracks.length;d++)i[d]=f.tracks[d].file;c=this.startingTrack||0}}else typeof f.tracks=="string"&&(i[0]=f.tracks);this.playlist=new S(this,u,f.shuffle,f.loadLimit,i,c)}else this.playlist=new S(this,u,f.shuffle,f.loadLimit);this.initialized=!0,this.uiDirty=!0,H()}(function(I,n){n(t)})(re,f=>{f.Gapless5=$,f.LogLevel=r,f.CrossfadeShape=a})})(yt);const oe=""+new URL("fountain-DWXOWl5E.ogg",import.meta.url).href,ae=""+new URL("bell-Chy8iJIY.ogg",import.meta.url).href;class zt{constructor(e){this.backgroundVolume=e.backgroundVolume}volumeAt(e){return this.backgroundVolume(e)}}class ue{constructor(e){this.time=0,this.ringBell=e.ringBell??Nt,this.setBackgroundVolume=e.setBackgroundVolume??Nt,this.program=e.program??le}begin(){this.ringBell(),this.setBackgroundVolume(0)}markTime(e){this.time+=e,this.setBackgroundVolume(this.program.volumeAt(this.time))}}const le=new zt({backgroundVolume:()=>0}),Nt=()=>{};function ce(t){return t[t.length-1]}function he(t){return t[0]}function fe(t){return(e,s)=>{const r=t(e),a=t(s);return r>a?1:a>r?-1:0}}function de(t){const e=new _e(t);return s=>e.at(s)}class _e{constructor(e){this.points=[...e.points].sort(fe(s=>s.x))}at(e){if(this.points.length===0)throw new Error("Cannot evaluate a piecewise function with no points");const s=ce(this.points.filter(a=>a.x<=e)),r=he(this.points.filter(a=>a.x>e));return s==null?r.y:r==null?s.y:(r.y-s.y)*(e-s.x)/(r.x-s.x)+s.y}}class pe{constructor(e){this.then=null,this.now=e}tick(){const e=this.then;return this.then=this.now(),e==null?0:this.now()-e}}function ge(t){return K("div",{class:"centering-frame"},K("div",{class:"panel"},K("div",null,K("button",{class:"raised",disabled:t.beginButtonDisabled,onClick:t.onBegin},"Begin"))))}const me=()=>({beginButtonDisabled:!0});function ye(){return{beginButtonDisabled:!1}}function ke(t,e){return e(t)}const ht=1e3,ft=60*ht,be=5*ft,ve=.5,Ct=new yt.Gapless5({tracks:[oe],loop:!0}),Et=new yt.Gapless5({tracks:[ae]});function Se(){const[t,e]=ee(ke,null,ye);return K(ge,{beginButtonDisabled:t.beginButtonDisabled,onBegin:()=>{e(me),Te()}})}function Te(){const t=new ue({setBackgroundVolume:s=>Ct.setVolume(s*ve),program:new zt({backgroundVolume:de({points:[{x:0,y:0},{x:10*ht,y:1},{x:30*ft,y:1},{x:30*ft+20*ht,y:0}]})})});t.begin(),Ct.play(),Et.play();const e=new pe(Date.now);setInterval(()=>t.markTime(e.tick()),100),setInterval(()=>Pe(Et),be)}function Pe(t){t.stop(),t.play()}const dt=Symbol(),_t=Symbol(),pt=Symbol(),st=Symbol();function j(t,e){function s(...r){if(r.length>=t.length)return t(...r);{const a=(...o)=>s(...r,...o);return a[dt]=t,a[_t]=s,a[pt]=r,a[st]=s[st],a}}return s[dt]=t,s[_t]=s,s[pt]=[],s[st]=e||we(t),s}function lt(t){return t[dt]}function xe(t){return t[_t]}function gt(t){return t[pt]||[]}function we(t){return t[st]||t.name}class Ae extends Error{constructor(e){super("Expectation failed"),this.expectArgs=e}}const $e=j(function(t,e){return t(e)},"which"),it=j(function(t,e){var s,r;if(Le(t))return t(e);if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((a,o)=>it(t[o],e[o]));if(t instanceof Function&&e instanceof Function)return lt(t)&&lt(t)===lt(e)?it(gt(t),gt(e)):t===e;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString();if(t instanceof Set&&e instanceof Set)return t.size===e.size&&[...t.values()].every(a=>e.has(a));if(t instanceof Error&&e instanceof Error)return t.message===e.message&&t.__proto__.constructor===e.__proto__.constructor;if(Ft(t)&&Ft(e)){const a=Object.keys(t),o=Object.keys(e);return a.length===o.length&&a.every(S=>it(t[S],e[S]))&&((s=t.__proto__)==null?void 0:s.constructor)===((r=e.__proto__)==null?void 0:r.constructor)}return t===e},"equals");j(function(t,e){return t===e},"is");j(function(t,e,...s){return!t(e,...s)},"not");j(function(t){return/^\s*$/.test(t)},"isBlank");function Ft(t){return!!t&&typeof t=="object"}function Le(t){return t instanceof Function&&xe(t)===$e&&gt(t).length===1}j(function(e,s){return s.slice(0,e.length)===e?s.slice(e.length):s});j(function(e,s){return s instanceof Ae&&it(e,s.expectArgs)});Zt(K(Se,null),document.getElementById("app"));
